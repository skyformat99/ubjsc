cmake_minimum_required(VERSION 2.8)
project(ubjsc)
enable_testing()
include(GenerateExportHeader)
include(InstallRequiredSystemLibraries)

set(CPACK_PACKAGE_NAME libubjsc)
set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "Enterprise-grade C library for manipulating UBJSON")
set(CPACK_PACKAGE_VENDOR "Tomasz Sieprawski")
set(CPACK_PACKAGE_CONTACT "tomasz@sieprawski.eu")
set(CPACK_PACKAGE_DESCRIPTION_FILE "${CMAKE_CURRENT_SOURCE_DIR}/README.md")
set(CPACK_RESOURCE_FILE_LICENCE "${CMAKE_CURRENT_SOURCE_DIR}/LICENSE.md")
set(CPACK_PACKAGE_VERSION_MAJOR "0")
set(CPACK_PACKAGE_VERSION_MINOR "1")
set(CPACK_PACKAGE_VERSION_PATCH "1")
set(CPACK_SOURCE_IGNORE_FILES "/.hg/" ".hgignore" "/build/" "/dist/" "~$" ".orig$" ".sh$" "/.hgsub" "/.hgsubstate" "/.sonar" "/sonar-project.properties")
set(CPACK_STRIP_FILES "lib/libubjson.so;lib/libptrie.so")
set(CPACK_DEBIAN_PACKAGE_DEPENDS "libc6")
include(CPack)

if(UNIX)
    set(CMAKE_CXX_FLAGS_DEBUG "-g -O0 -fprofile-arcs -ftest-coverage")
    set(CMAKE_C_FLAGS_DEBUG "-g -O0 -fprofile-arcs -ftest-coverage")
endif(UNIX)

add_subdirectory(ptrie/include)
add_subdirectory(ptrie/src)

add_subdirectory(include)
add_subdirectory(src)
add_subdirectory(test)
